<app-header></app-header>

<div class="container mt-4">
    <div class="row">
        <h2 class="col-6">Hi {{user.firstname}},</h2>
        <h2 class="col-6 text-end">{{currentDate}}</h2>
    </div>
    <div class="mt-4 mb-3">
        <h6 class="text-center">YOUR BALANCE</h6>
        <h1 class="text-center">${{accountService.getBalance()}}</h1>
    </div>

    <div class="row">
        <div class="col-xl-6">
            <div class="card shadow">
                <div class="card-body bg-success bg-gradient text-white">
                    <div class="d-flex">
                        <div class="my-auto">
                            <h4>Income</h4>
                        </div>
                        <div class="ms-auto">
                            <h1>${{accountService.getIncome()}}</h1>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-6">
            <div class="card shadow">
                <div class="card-body bg-danger bg-gradient text-white">
                    <div class="d-flex">
                        <div class="my-auto">
                            <h4>Expense</h4>
                        </div>
                        <div class="ms-auto">
                            <h1>${{accountService.getExpense()}}</h1>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <h4 class="mt-5 text-center">History</h4>

    <div class="row mt-4">
        <div class="col-xl-6 mx-auto">
            <div class="container">
                <div>
                    <div *ngFor="let item of accountService.getAllDates() | keyvalue">
                        <div class="card-body">
                            <p class="card-title">{{item.key | date:'fullDate'}}</p>
                        </div>
                        <ul *ngFor="let transaction of item.value" class="list-group list-group-flush">
                            <li class="list-group-item"
                                [ngStyle]="{borderRight: transaction.amount < 0 ? '5px solid #dc3545' : '5px solid #198754'}">
                                <span>{{transaction.description}}</span>
                                <span *ngIf="transaction.amount < 0" style="float:right">-${{math.abs(transaction.amount)}}</span>
                                <span *ngIf="transaction.amount > 0" style="float:right">${{transaction.amount}}</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <h4 class="mt-5 text-center">Add a new transaction</h4>
    <div class="mt-4">
        <form #transactionForm="ngForm" (onSubmit)="addTransaction()" novalidate>
            <div class="form-group col-6 mb-2 mx-auto">
                <label for="">Description</label>
                <input 
                    type="text" 
                    name="description"
                    class="form-control" 
                    placeholder="Enter description..."
                    maxlength="50">
            </div>
        
            <div class="form-group col-6 mb-2 mx-auto">
                <label for="">Amount</label>
                <input 
                    type="number" 
                    name="amount"
                    class="form-control" 
                    placeholder="Enter amount..."
                    min="0"
                    max=""
                    ng-pattern="/^[0-9]+(\.[0-9]{1,2})?$/">
            </div>

            <div class="form-group col-6 mb-4 mx-auto">
                <label for="">Income or Expense</label>
                <select class="form-select">
                    <option selected>Select an option</option>
                    <option value="income">Income</option>
                    <option value="expense">Expense</option>
                </select>
            </div>

           <div class="col text-center">
               <button class="btn btn-primary col-6">Add transaction</button>
           </div>
        </form>
    </div>
</div>


